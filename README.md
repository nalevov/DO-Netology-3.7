# DO-Netology-3.7

1. Для проверки списка доступных сетевых интерфейсов есть следующие команды:

- Windows:
	ipconfig /all	
	netsh interface show interface

- Linux:	
	ip -c -br link	

2.  Для распознавания соседа по сетевому интерфейсу используется протокол lldp. Для этого существует пакет lldpd и команда lldpctl

3. Для разделения L2 коммутатора на несколько виртуальных сетей используется технология VLAN. В Linux для этого есть пакет apt install vlan, используются команды
	- vconfig add eth0 2 
	- ip link add link eth0 name eth0.10 type vlan id 10

 или вручную изменив файл /etc/network/interfaces

Пример конфига:

	lo               UNKNOWN        00:00:00:00:00:00 <LOOPBACK,UP,LOWER_UP>
	eth0             UP             08:00:27:b1:28:5d <BROADCAST,MULTICAST,UP,LOWER_UP>
	eth0.2@eth0      DOWN           08:00:27:b1:28:5d <BROADCAST,MULTICAST>
	eth0.10@eth0     DOWN           08:00:27:b1:28:5d <BROADCAST,MULTICAST>

4. В Linux есть следующие типы агрегации интерфейсов:

Mode-0(balance-rr) – Данный режим используется по умолчанию. Balance-rr обеспечивается балансировку нагрузки и отказоустойчивость. В данном режиме сетевые пакеты отправляются “по кругу”, от первого интерфейса к последнему. Если выходят из строя интерфейсы, пакеты отправляются на остальные оставшиеся. Дополнительной настройки коммутатора не требуется при нахождении портов в одном коммутаторе. При разностных коммутаторах требуется дополнительная настройка.

Mode-1(active-backup) – Один из интерфейсов работает в активном режиме, остальные в ожидающем. При обнаружении проблемы на активном интерфейсе производится переключение на ожидающий интерфейс. Не требуется поддержки от коммутатора.

Mode-2(balance-xor) – Передача пакетов распределяется по типу входящего и исходящего трафика по формуле ((MAC src) XOR (MAC dest)) % число интерфейсов. Режим дает балансировку нагрузки и отказоустойчивость. Не требуется дополнительной настройки коммутатора/коммутаторов.

Mode-3(broadcast) – Происходит передача во все объединенные интерфейсы, тем самым обеспечивая отказоустойчивость. Рекомендуется только для использования MULTICAST трафика.

Mode-4(802.3ad) – динамическое объединение одинаковых портов. В данном режиме можно значительно увеличить пропускную способность входящего так и исходящего трафика. Для данного режима необходима поддержка и настройка коммутатора/коммутаторов.

Mode-5(balance-tlb) – Адаптивная балансировки нагрузки трафика. Входящий трафик получается только активным интерфейсом, исходящий распределяется в зависимости от текущей загрузки канала каждого интерфейса. Не требуется специальной поддержки и настройки коммутатора/коммутаторов.

Mode-6(balance-alb) – Адаптивная балансировка нагрузки. Отличается более совершенным алгоритмом балансировки нагрузки чем Mode-5). Обеспечивается балансировку нагрузки как исходящего так и входящего трафика. Не требуется специальной поддержки и настройки коммутатора/коммутаторов.


Пример конфига:

auto bond0

iface bond0 inet static
    address 10.31.1.5
    netmask 255.255.255.0
    network 10.31.1.0
    gateway 10.31.1.254
    bond-slaves eth0 eth1
    bond-mode active-backup
    bond-miimon 100
    bond-downdelay 200
    bond-updelay 200

5.  В сети с маской /29 можно выделить 6 IP адресов. Из сети с маской /24 можно получить 32 подсети с маской /29.

Пример подсетей с маской /29

	10.10.10.0 - адрес сети
	10.10.10.7 - адрес широковещательной рассылки

	10.10.10.128 - адрес сети
	10.10.10.135 - адрес широковещательной рассылки

6. Возможно, что в таком случае можно взять частные адреса из сети 100.64.0.0 /10 с маской /26 для 40-50 хостов.
  
 (Рискну предположить из 198.18.0.0/15 при условии, что эти адреса никак не будут выходить в Интернет)

7. Команды для работы с ARP-таблицами  
	ARP таблицу можно проверить командой -	arp -a  
	Очистить ARP кеш полностью -		arp -d * (в случае Linux нужно указать имя хоста)
	Удалить только один нужный IP-		arp -d {IPAddress}/ dev {DEVICE}		

 В Linux дополнительно можно воспользоваться:
 ip neigh - проверить ARP таблицу
 ip neigh del {IPAddress} dev {DEVICE}	
 sudo ip neigh flush all - Очистить ARP кеш полностью


  






